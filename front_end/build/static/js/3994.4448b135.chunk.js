"use strict";(self.webpackChunkcra_javascript_starter=self.webpackChunkcra_javascript_starter||[]).push([[3994],{23994:function(e,t,n){n.r(t),n.d(t,{MetaMaskConnector:function(){return x}});var r=n(74165),s=n(15861),i=n(1413),a=n(15671),c=n(43144),o=n(97326),h=n(60136),u=n(29388),l=n(63700),d=n(46170),p=n(44126),v=n(88346),f=n(2513),w=n(66131),k=n(97419),m=(n(65892),new WeakMap),x=function(e){(0,h.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;(0,a.Z)(this,n);var s={name:"MetaMask",shimDisconnect:!0,shimChainChangedDisconnect:!0,getProvider:function(){function e(e){if(!(null===e||void 0===e||!e.isMetaMask)&&(!e.isBraveWallet||e._events||e._state)&&!e.isAvalanche&&!e.isKuCoinWallet&&!e.isPortal&&!e.isTokenPocket&&!e.isTokenary)return e}var t;if((0,v.a)(globalThis.window))return null!==(t=globalThis.window.ethereum)&&void 0!==t&&t.providers?globalThis.window.ethereum.providers.find(e):e(globalThis.window.ethereum)}},c=(0,i.Z)((0,i.Z)({},s),e.options);return r=t.call(this,{chains:e.chains,options:c,connectorStorage:e.connectorStorage}),(0,d._)((0,o.Z)(r),"id",f.w.metamask),(0,l._)((0,o.Z)(r),m,{writable:!0,value:void 0}),(0,l.a)((0,o.Z)(r),m,c.UNSTABLE_shimOnConnectSelectAccount),r}return(0,c.Z)(n,[{key:"connect",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s,i,a,c,o,h,u,d=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.prev=1,e.next=4,this.getProvider();case 4:if(i=e.sent){e.next=7;break}throw new p.a;case 7:if(this.setupListeners(),this.emit("message",{type:"connecting"}),a=null,!(0,l.b)(this,m)||null===(n=this.options)||void 0===n||!n.shimDisconnect||Boolean(this.connectorStorage.getItem(this.shimDisconnectKey))){e.next=25;break}return e.next=13,this.getAccount().catch((function(){return null}));case 13:if(a=e.sent,!!!a){e.next=25;break}return e.prev=16,e.next=19,i.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 19:e.next=25;break;case 21:if(e.prev=21,e.t0=e.catch(16),!this.isUserRejectedRequestError(e.t0)){e.next=25;break}throw new p.U(e.t0);case 25:if(a){e.next=30;break}return e.next=28,i.request({method:"eth_requestAccounts"});case 28:c=e.sent,a=k.getAddress(c[0]);case 30:return e.next=32,this.getChainId();case 32:if(o=e.sent,h=this.isChainUnsupported(o),!t.chainId||o===t.chainId){e.next=45;break}return e.prev=35,e.next=38,this.switchChain(t.chainId);case 38:o=t.chainId,h=this.isChainUnsupported(t.chainId),e.next=45;break;case 42:e.prev=42,e.t1=e.catch(35),console.error("Could not switch to chain id : ".concat(t.chainId),e.t1);case 45:if(null===(s=this.options)||void 0===s||!s.shimDisconnect){e.next=48;break}return e.next=48,this.connectorStorage.setItem(this.shimDisconnectKey,"true");case 48:return u={chain:{id:o,unsupported:h},provider:i,account:a},this.emit("connect",u),e.abrupt("return",u);case 53:if(e.prev=53,e.t2=e.catch(1),!this.isUserRejectedRequestError(e.t2)){e.next=57;break}throw new p.U(e.t2);case 57:if(-32002!==e.t2.code){e.next=59;break}throw new p.R(e.t2);case 59:throw e.t2;case 60:case"end":return e.stop()}}),e,this,[[1,53],[16,21],[35,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"switchAccount",value:function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProvider();case 2:return t=e.sent,e.next=5,t.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(w._)}}]);
//# sourceMappingURL=3994.4448b135.chunk.js.map